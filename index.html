<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#7C9EF5">
    <meta name="format-detection" content="telephone=no">

    <title>ÌÅ¥ÎûòÏä§Ìé´ - ÌïôÍ∏â Í≤ΩÏòÅ ÎèÑÏö∞ÎØ∏</title>

    <!-- PWA ÏÑ§Ï†ï -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icons/icon-192x192.png" type="image/png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">

    <!-- Critical CSS (Ïù∏ÎùºÏù∏) -->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background: #FFF9F0;
            min-height: 100vh;
            min-height: -webkit-fill-available;
        }
        #authLoadingScreen {
            position: fixed;
            inset: 0;
            background: #fff;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .loading-content { text-align: center; }
        .loading-icon { font-size: 3.5rem; animation: bounce 1s infinite; }
        .loading-text { font-size: 1rem; font-weight: 600; color: #374151; margin-top: 1rem; }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>

    <!-- Tailwind CSS (ÎπåÎìúÎê®) - ÎπÑÎèôÍ∏∞ Î°úÎî© -->
    <link rel="preload" href="css/output.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="css/output.css"></noscript>

    <!-- Ïª§Ïä§ÌÖÄ Ïä§ÌÉÄÏùº - ÎπÑÎèôÍ∏∞ Î°úÎî© -->
    <link rel="preload" href="css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="css/style.css"></noscript>

    <!-- Google Fonts - ÏôÑÏ†Ñ ÎπÑÎèôÍ∏∞ (ÏòµÏÖò) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <!-- Ïù∏Ï¶ù Î°úÎî© ÌôîÎ©¥ -->
    <div id="authLoadingScreen">
        <div class="loading-content">
            <div class="loading-icon">üêæ</div>
            <p class="loading-text">ÌÅ¥ÎûòÏä§Ìé´ ÏãúÏûë Ï§ë...</p>
        </div>
    </div>

    <!-- Ïï± Ïª®ÌÖåÏù¥ÎÑà -->
    <div id="app" class="app-container-new">
        <!-- Î∞∞Í≤Ω Ïû•Ïãù -->
        <div class="bg-decorations">
            <div class="bg-circle bg-circle-1"></div>
            <div class="bg-circle bg-circle-2"></div>
            <div class="bg-circle bg-circle-3"></div>
        </div>

        <!-- ÏÉÅÎã® ÎÑ§ÎπÑÎ∞î (Í∏∞Î≥∏ Ïà®ÍπÄ - ÌîåÎ¶¨Ïª§ÎßÅ Î∞©ÏßÄ) -->
        <header class="top-navbar hidden">
            <div class="navbar-left">
                <span class="navbar-logo">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="28" height="28">
                        <circle cx="7" cy="8" r="2.5"/>
                        <circle cx="17" cy="8" r="2.5"/>
                        <circle cx="4" cy="14" r="2"/>
                        <circle cx="20" cy="14" r="2"/>
                        <ellipse cx="12" cy="16" rx="5" ry="4"/>
                    </svg>
                </span>
                <h1 class="navbar-title">ÌÅ¥ÎûòÏä§Ìé´</h1>
            </div>
            <!-- ÍµêÏÇ¨Ïö© ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
            <nav class="navbar-tabs" id="teacherNav">
                <button data-route="dashboard" class="navbar-tab active">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M3 9.5L12 4l9 5.5"/>
                            <path d="M19 13v6a1 1 0 01-1 1H6a1 1 0 01-1-1v-6"/>
                        </svg>
                    </span>
                    <span>Ìôà</span>
                </button>
                <button data-route="timetable" class="navbar-tab">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="4" width="18" height="16" rx="2"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <text x="12" y="17" text-anchor="middle" font-size="7" font-weight="600" fill="currentColor" stroke="none">17</text>
                        </svg>
                    </span>
                    <span>ÏãúÍ∞ÑÌëú</span>
                </button>
                <button data-route="petfarm" class="navbar-tab">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="7" cy="8" r="2"/>
                            <circle cx="17" cy="8" r="2"/>
                            <circle cx="4.5" cy="13" r="1.5"/>
                            <circle cx="19.5" cy="13" r="1.5"/>
                            <ellipse cx="12" cy="15" rx="4" ry="3.5"/>
                        </svg>
                    </span>
                    <span>Ìé´ÎÜçÏû•</span>
                </button>
                <button data-route="emotion" class="navbar-tab">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 21C12 21 4 14.5 4 9.5C4 6.5 6.5 4 9.5 4C11 4 12 5 12 5C12 5 13 4 14.5 4C17.5 4 20 6.5 20 9.5C20 14.5 12 21 12 21Z"/>
                            <path d="M12 8v4M10 10h4" stroke-width="1.2"/>
                        </svg>
                    </span>
                    <span>ÎßàÏùå</span>
                </button>
                <button data-route="praise" class="navbar-tab">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                    </span>
                    <span>Ïπ≠Ï∞¨</span>
                </button>
                <button data-route="stats" class="navbar-tab">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="4" y="13" width="4" height="7" rx="1"/>
                            <rect x="10" y="9" width="4" height="11" rx="1"/>
                            <rect x="16" y="5" width="4" height="15" rx="1"/>
                        </svg>
                    </span>
                    <span>ÌÜµÍ≥Ñ</span>
                </button>
            </nav>
            <!-- ÌïôÏÉùÏö© ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò (Í∏∞Î≥∏ Ïà®ÍπÄ) -->
            <nav class="navbar-tabs hidden justify-center" id="studentNav">
                <button data-route="student-main" class="navbar-tab">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 21C12 21 4 14.5 4 9.5C4 6.5 6.5 4 9.5 4C11 4 12 5 12 5C12 5 13 4 14.5 4C17.5 4 20 6.5 20 9.5C20 14.5 12 21 12 21Z"/>
                            <path d="M12 8v4M10 10h4" stroke-width="1.2"/>
                        </svg>
                    </span>
                    <span>ÎßàÏùå</span>
                </button>
                <button data-route="student-praise" class="navbar-tab">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                    </span>
                    <span>Î∞õÏùÄ Ïπ≠Ï∞¨</span>
                </button>
                <button data-route="student-timetable" class="navbar-tab">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="4" width="18" height="16" rx="2"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <text x="12" y="17" text-anchor="middle" font-size="7" font-weight="600" fill="currentColor" stroke="none">17</text>
                        </svg>
                    </span>
                    <span>Ï£ºÍ∞Ñ ÏãúÍ∞ÑÌëú</span>
                </button>
                <button data-route="pet-collection" class="navbar-tab">
                    <span class="nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                    </span>
                    <span>Ìé´ÎèÑÍ∞ê</span>
                </button>
            </nav>
            <div class="navbar-right">
                <span id="classInfo" class="navbar-class-info"></span>
                <button id="hamburgerBtn" class="hamburger-btn">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
            <button id="logoutBtn" class="hidden"></button>
        </header>

        <!-- Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà -->
        <div class="main-container">
            <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
            <main id="content" class="main-content">
                <!-- ÎùºÏö∞ÌÑ∞Ïóê ÏùòÌï¥ ÎèôÏ†ÅÏúºÎ°ú Î†åÎçîÎßÅÎê® -->
            </main>

            <!-- Ïö∞Ï∏° Ìà¥Î∞î (Ìà¨Î™Ö Î¶¨ÌÄ¥Îìú Í∏ÄÎùºÏä§) -->
            <aside class="right-toolbar" id="rightToolbar">
                <div class="toolbar-items">
                    <div class="toolbar-btn-wrapper">
                        <button id="dateHistoryBtn" class="toolbar-btn">
                            <span class="toolbar-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                </svg>
                            </span>
                            <span id="currentDate" class="toolbar-text"></span>
                        </button>
                        <input type="date" id="historyDatePicker" class="toolbar-date-picker" />
                    </div>
                    <button id="notificationBtn" class="toolbar-btn">
                        <span class="toolbar-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                            </svg>
                        </span>
                        <span class="toolbar-text">ÏïåÎ¶º</span>
                        <span id="notificationBadge" class="notification-badge hidden">0</span>
                    </button>
                    <button id="settingsBtn" class="toolbar-btn">
                        <span class="toolbar-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                            </svg>
                        </span>
                        <span class="toolbar-text">ÏÑ§Ï†ï</span>
                    </button>
                    <button id="headerLogoutBtn" class="toolbar-btn toolbar-btn-danger">
                        <span class="toolbar-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                                <polyline points="16 17 21 12 16 7"/>
                                <line x1="21" y1="12" x2="9" y2="12"/>
                            </svg>
                        </span>
                        <span class="toolbar-text">Î°úÍ∑∏ÏïÑÏõÉ</span>
                    </button>
                </div>
                <button class="toolbar-toggle" id="toolbarToggle">
                    <span class="toggle-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" width="14" height="14">
                            <polyline points="15 18 9 12 15 6"/>
                        </svg>
                    </span>
                    <span class="toggle-text toolbar-text">Ï†ëÍ∏∞</span>
                </button>
            </aside>
        </div>

        <!-- Î™®Î∞îÏùº ÎìúÎ°úÏñ¥ Î©îÎâ¥ -->
        <div class="mobile-drawer" id="mobileDrawer">
            <div class="mobile-drawer-nav">
                <button data-route="dashboard" class="mobile-nav-item active">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M3 9.5L12 4l9 5.5"/>
                            <path d="M19 13v6a1 1 0 01-1 1H6a1 1 0 01-1-1v-6"/>
                        </svg>
                    </span>
                    <span>Ìôà</span>
                </button>
                <button data-route="timetable" class="mobile-nav-item">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="4" width="18" height="16" rx="2"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <text x="12" y="17" text-anchor="middle" font-size="7" font-weight="600" fill="currentColor" stroke="none">17</text>
                        </svg>
                    </span>
                    <span>ÏãúÍ∞ÑÌëú</span>
                </button>
                <button data-route="petfarm" class="mobile-nav-item">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="7" cy="8" r="2"/>
                            <circle cx="17" cy="8" r="2"/>
                            <circle cx="4.5" cy="13" r="1.5"/>
                            <circle cx="19.5" cy="13" r="1.5"/>
                            <ellipse cx="12" cy="15" rx="4" ry="3.5"/>
                        </svg>
                    </span>
                    <span>Ìé´ÎÜçÏû•</span>
                </button>
                <button data-route="emotion" class="mobile-nav-item">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 21C12 21 4 14.5 4 9.5C4 6.5 6.5 4 9.5 4C11 4 12 5 12 5C12 5 13 4 14.5 4C17.5 4 20 6.5 20 9.5C20 14.5 12 21 12 21Z"/>
                            <path d="M12 8v4M10 10h4" stroke-width="1.2"/>
                        </svg>
                    </span>
                    <span>ÎßàÏùå</span>
                </button>
                <button data-route="praise" class="mobile-nav-item">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                    </span>
                    <span>Ïπ≠Ï∞¨</span>
                </button>
                <button data-route="stats" class="mobile-nav-item">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="4" y="13" width="4" height="7" rx="1"/>
                            <rect x="10" y="9" width="4" height="11" rx="1"/>
                            <rect x="16" y="5" width="4" height="15" rx="1"/>
                        </svg>
                    </span>
                    <span>ÌÜµÍ≥Ñ</span>
                </button>
            </div>
            <!-- ÌïôÏÉùÏö© ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò (Í∏∞Î≥∏ Ïà®ÍπÄ) -->
            <div class="mobile-drawer-nav hidden" id="mobileStudentNav">
                <button data-route="student-main" class="mobile-nav-item">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 21C12 21 4 14.5 4 9.5C4 6.5 6.5 4 9.5 4C11 4 12 5 12 5C12 5 13 4 14.5 4C17.5 4 20 6.5 20 9.5C20 14.5 12 21 12 21Z"/>
                            <path d="M12 8v4M10 10h4" stroke-width="1.2"/>
                        </svg>
                    </span>
                    <span>ÎßàÏùå</span>
                </button>
                <button data-route="student-praise" class="mobile-nav-item">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                        </svg>
                    </span>
                    <span>Î∞õÏùÄ Ïπ≠Ï∞¨</span>
                </button>
                <button data-route="student-timetable" class="mobile-nav-item">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="4" width="18" height="16" rx="2"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <text x="12" y="17" text-anchor="middle" font-size="7" font-weight="600" fill="currentColor" stroke="none">17</text>
                        </svg>
                    </span>
                    <span>Ï£ºÍ∞Ñ ÏãúÍ∞ÑÌëú</span>
                </button>
                <button data-route="pet-collection" class="mobile-nav-item">
                    <span class="mobile-nav-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                    </span>
                    <span>Ìé´ÎèÑÍ∞ê</span>
                </button>
            </div>
            <div class="mobile-drawer-tools">
                <button id="mobileNotificationBtn" class="mobile-tool-btn">
                    <span class="mobile-tool-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                    </span>
                    <span>ÏïåÎ¶º</span>
                </button>
                <button id="mobileSettingsBtn" class="mobile-tool-btn">
                    <span class="mobile-tool-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                    </span>
                    <span>ÏÑ§Ï†ï</span>
                </button>
                <button id="mobileLogoutBtn" class="mobile-tool-btn mobile-tool-btn-danger">
                    <span class="mobile-tool-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                    </span>
                    <span>Î°úÍ∑∏ÏïÑÏõÉ</span>
                </button>
            </div>
        </div>
        <div class="mobile-drawer-overlay" id="mobileDrawerOverlay"></div>
    </div>

    <!-- Î™®Îã¨ Ïª®ÌÖåÏù¥ÎÑà -->
    <div id="modalContainer" class="fixed inset-0 z-[100] hidden">
        <div class="modal-backdrop absolute inset-0 bg-black/50"></div>
        <div class="modal-content"></div>
    </div>

    <!-- ÌÜ†Ïä§Ìä∏ Î©îÏãúÏßÄ -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- QR ÏΩîÎìú ÎùºÏù¥Î∏åÎü¨Î¶¨ (ÏßÄÏó∞ Î°úÎî©) -->
    <script>
        // QR ÎùºÏù¥Î∏åÎü¨Î¶¨ ÌïÑÏöî ÏãúÏóêÎßå Î°úÎî©
        window.loadQRLibrary = function() {
            if (window.QRCode) return Promise.resolve();
            return new Promise((resolve) => {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js';
                script.onload = resolve;
                document.head.appendChild(script);
            });
        };
    </script>

    <!-- Ìï¥Ïãú ÏóÜÏùÑ Îïå Í∏∞Î≥∏ ÎùºÏö∞Ìä∏ ÏÑ§Ï†ï (app.js Î°úÎìú Ï†Ñ) -->
    <script>
        // Ìï¥Ïãú ÏóÜÏúºÎ©¥ Ï¶âÏãú #login ÏÑ§Ï†ï (replaceStateÎ°ú ÌûàÏä§ÌÜ†Î¶¨ Ïò§Ïóº Î∞©ÏßÄ)
        if (!window.location.hash) {
            history.replaceState(null, '', '#login');
        }
    </script>

    <!-- JavaScript Î™®Îìà (deferÎ°ú ÎπÑÏ∞®Îã® Î°úÎî©) -->
    <script type="module" src="js/app.js?v=20260126a"></script>

    <!-- Service Worker Îì±Î°ù -->
    <script>
        if ('serviceWorker' in navigator) {
            // Ïù¥ÎØ∏ ÏÉàÎ°úÍ≥†Ïπ® Ï§ëÏù∏ÏßÄ ÌîåÎûòÍ∑∏
            let isReloading = false;
            // Ï≤´ Î∞©Î¨∏Ïù∏ÏßÄ (SW controllerÍ∞Ä ÏóÜÏúºÎ©¥ Ï≤´ Î∞©Î¨∏)
            const isFirstVisit = !navigator.serviceWorker.controller;

            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then((registration) => {
                        console.log('[PWA] Service Worker Îì±Î°ù ÏÑ±Í≥µ:', registration.scope);

                        // ÏÉà Î≤ÑÏ†Ñ Í∞êÏßÄ Ïãú skipWaiting ÏöîÏ≤≠
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    console.log('[PWA] ÏÉà Î≤ÑÏ†Ñ Í∞êÏßÄ - skipWaiting ÏöîÏ≤≠');
                                    newWorker.postMessage('skipWaiting');
                                }
                            });
                        });

                        // Ïª®Ìä∏Î°§Îü¨ Î≥ÄÍ≤Ω Ïãú ÏÉàÎ°úÍ≥†Ïπ® (Ï≤´ Î∞©Î¨∏Ïù¥ ÏïÑÎãå Í≤ΩÏö∞Îßå)
                        navigator.serviceWorker.addEventListener('controllerchange', () => {
                            // Ï≤´ Î∞©Î¨∏Ïù¥Î©¥ ÏÉàÎ°úÍ≥†Ïπ® ÏïàÌï® (ÌîåÎ¶¨Ïª§ÎßÅ Î∞©ÏßÄ)
                            if (isFirstVisit) {
                                console.log('[PWA] Ï≤´ Î∞©Î¨∏ - ÏÉàÎ°úÍ≥†Ïπ® Í±¥ÎÑàÎúÄ');
                                return;
                            }
                            if (isReloading) return;
                            isReloading = true;
                            console.log('[PWA] Ïª®Ìä∏Î°§Îü¨ Î≥ÄÍ≤Ω - ÏÉàÎ°úÍ≥†Ïπ®');
                            window.location.reload();
                        });
                    })
                    .catch((error) => {
                        console.error('[PWA] Service Worker Îì±Î°ù Ïã§Ìå®:', error);
                    });
            });
        }
    </script>

    <!-- Google Fonts ÏßÄÏó∞ Î°úÎî© -->
    <script>
        // Ïï± Î°úÎìú ÏôÑÎ£å ÌõÑ Ìè∞Ìä∏ Î°úÎî©
        window.addEventListener('load', function() {
            requestIdleCallback ? requestIdleCallback(loadFonts) : setTimeout(loadFonts, 100);
        });
        function loadFonts() {
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = 'https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap';
            document.head.appendChild(link);
        }
    </script>
</body>
</html>
