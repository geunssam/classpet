/* ======================================
   모바일 성능 최적화 (핵심!)
   ====================================== */
@media (max-width: 640px) {
    /* blur/backdrop-filter 제거 (선택적) */
    .nav-dock,
    .header-dock,
    .week-navigator-dock,
    .timetable-grid-dock,
    .timetable-btn-dock,
    .settings-btn-dock,
    .header-glass-btn,
    .timetable-cell-new,
    .liquid-btn-small {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }

    /* 단순 배경색으로 대체 */
    .nav-dock {
        background: #ffffff !important;
        border: 1px solid #e5e7eb !important;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.1) !important;
    }

    .header-dock,
    .week-navigator-dock,
    .timetable-grid-dock,
    .timetable-btn-dock,
    .settings-btn-dock {
        background: #f9fafb !important;
        border: 1px solid #e5e7eb !important;
    }

    .header-glass-btn,
    .liquid-btn-small {
        background: #ffffff !important;
        border: 1px solid #e5e7eb !important;
    }

    /* 시간표 셀은 과목별 색상 적용을 위해 기본 배경만 설정 */
    .timetable-cell-new {
        border: 1px solid #e5e7eb !important;
    }

    .app-header,
    header {
        background: #ffffff !important;
    }

    /* ::before 가상요소 숨김 (리퀴드 글라스 효과) */
    .nav-dock::before,
    .header-dock::before,
    .week-navigator-dock::before,
    .timetable-grid-dock::before,
    .timetable-btn-dock::before,
    .timetable-cell-new::before,
    .settings-btn-dock::before,
    .liquid-btn-small::before {
        display: none !important;
    }

    /* 트랜지션 간소화 */
    .nav-item,
    .timetable-cell-new,
    .card,
    button {
        transition: none !important;
    }

    /* blob 제거 */
    .blob,
    .blob-1,
    .blob-2,
    .blob-3 {
        display: none !important;
    }

    /* 스크롤 성능 */
    .app-content,
    #content,
    main {
        -webkit-overflow-scrolling: touch;
    }

    /* 펫 카드 원형 중앙 정렬 보장 */
    .circle-center-content {
        position: absolute !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) !important;
        -webkit-transform: translate(-50%, -50%) !important;
    }

    /* 모달 중앙 정렬 보장 */
    #modalContainer .modal-content {
        position: absolute !important;
        top: 50% !important;
        left: 50% !important;
        transform: translate(-50%, -50%) scale(1) !important;
        -webkit-transform: translate(-50%, -50%) scale(1) !important;
    }
}

/* ===== 반응형: 태블릿 ===== */
@media (max-width: 1024px) {
    /* 태블릿에서도 토글 가능 - 기본 상태는 JavaScript로 관리 */
}

/* ===== 반응형: 모바일 ===== */
@media (max-width: 768px) {
    .navbar-tabs {
        display: none !important;
    }

    .hamburger-btn:not(.hidden) {
        display: flex !important;
    }

    /* 우측 툴바: JS에서 .minimized를 기본 적용 (화살표만) */

    /* 모바일 드로어에서 도구 섹션 숨김 (툴바가 대신) */
    .mobile-drawer-tools {
        display: none !important;
    }

    /* 프로필/학급정보는 드로어 하단으로 이동 */
    .teacher-profile-pic,
    .navbar-class-info {
        display: none !important;
    }

    .navbar-right {
        grid-column: -1;
    }

    .main-content {
        padding: 16px;
        margin-right: 0 !important;
    }

    .top-navbar:not(.hidden) {
        padding: 0 16px;
        flex-wrap: nowrap !important;
    }

    /* hidden 클래스는 항상 우선 */
    .top-navbar.hidden,
    .hamburger-btn.hidden,
    .mobile-drawer.hidden {
        display: none !important;
    }

    .navbar-left {
        flex-shrink: 1;
        min-width: 0;
    }

    .navbar-right {
        flex-shrink: 0;
    }

    .navbar-title {
        font-size: 16px;
    }

    .bg-decorations {
        display: none;
    }
}

@media (min-width: 769px) {
    .hamburger-btn {
        display: none !important;
    }

    .mobile-drawer {
        display: none !important;
    }

    .mobile-drawer-overlay {
        display: none !important;
    }
}

/* ===== 교사 모드: 1100px 이하에서 햄버거 전환 ===== */
@media (max-width: 1100px) {
    body.teacher-mode .navbar-tabs {
        display: none !important;
    }

    body.teacher-mode .hamburger-btn:not(.hidden) {
        display: flex !important;
    }

    body.teacher-mode .navbar-class-info,
    body.teacher-mode .teacher-profile-pic {
        display: none !important;
    }

    body.teacher-mode .navbar-left {
        flex-shrink: 1;
        min-width: 0;
    }

    body.teacher-mode .navbar-title {
        font-size: 18px;
    }

    /* 탭 숨김 시 우측 버튼이 끝으로 가도록 고정 */
    body.teacher-mode .navbar-right {
        grid-column: -1;
    }
}

/* 교사 모드 769-1100px: 드로어/오버레이 표시 허용 */
@media (min-width: 769px) and (max-width: 1100px) {
    body.teacher-mode .mobile-drawer {
        display: flex !important;
        flex-direction: column;
    }

    body.teacher-mode .mobile-drawer-overlay {
        display: block !important;
    }
}

/* ===== 학생 모드: 900px 이하에서 햄버거 전환 ===== */
@media (max-width: 900px) {
    body.student-mode .navbar-tabs {
        display: none !important;
    }

    body.student-mode .hamburger-btn:not(.hidden) {
        display: flex !important;
    }

    body.student-mode .navbar-class-info,
    body.student-mode .teacher-profile-pic,
    body.student-mode .student-profile {
        display: none !important;
    }

    /* 학생 헤더 버튼: 알림벨만 남기고 숨김 */
    body.student-mode .student-header-btn:not(#studentNotificationBtn) {
        display: none !important;
    }

    body.student-mode .navbar-left {
        flex-shrink: 1;
        min-width: 0;
    }

    body.student-mode .navbar-title {
        font-size: 16px;
    }

    body.student-mode .main-content {
        padding: 16px;
        margin-right: 0 !important;
    }

    /* 탭 숨김 시 우측 버튼이 끝으로 가도록 고정 */
    body.student-mode .navbar-right {
        grid-column: -1;
    }
}

/* 학생 모드 769-900px: 드로어/오버레이 표시 허용 (769px+ 숨김 오버라이드) */
@media (min-width: 769px) and (max-width: 900px) {
    body.student-mode .mobile-drawer {
        display: flex !important;
        flex-direction: column;
    }

    body.student-mode .mobile-drawer-overlay {
        display: block !important;
    }
}

/* ===== 콘텐츠 최대 너비 ===== */
@media (min-width: 1280px) {
    .main-content {
        max-width: 1000px;
        margin: 0 auto;
    }
}